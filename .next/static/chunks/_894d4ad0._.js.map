{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/projetos/catalogs/hooks/useLocalStorage.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nexport function useLocalStorage<T>(key: string, initialValue: T) {\r\n  const [storedValue, setStoredValue] = useState<T>(initialValue);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    try {\r\n      const item = window.localStorage.getItem(key);\r\n\r\n      if (item) {\r\n        try {\r\n          setStoredValue(JSON.parse(item));\r\n        } catch {\r\n          console.warn(\r\n            `Valor inválido no localStorage para chave \"${key}\". Resetando para valor inicial.`\r\n          );\r\n          setStoredValue(initialValue);\r\n          window.localStorage.setItem(key, JSON.stringify(initialValue));\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(`Erro ao acessar localStorage com chave \"${key}\":`, error);\r\n    }\r\n  }, [key, initialValue]);\r\n\r\n  const setValue = (value: T) => {\r\n    try {\r\n      setStoredValue(value);\r\n      if (typeof window !== \"undefined\") {\r\n        window.localStorage.setItem(key, JSON.stringify(value));\r\n      }\r\n    } catch (error) {\r\n      console.error(`Erro ao definir localStorage com chave \"${key}\":`, error);\r\n    }\r\n  };\r\n\r\n  return [storedValue, setValue] as const;\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;;AAEO,SAAS,gBAAmB,GAAW,EAAE,YAAe;;IAC7D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAK;IAElD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,uCAAmC;;YAAM;YAEzC,IAAI;gBACF,MAAM,OAAO,OAAO,YAAY,CAAC,OAAO,CAAC;gBAEzC,IAAI,MAAM;oBACR,IAAI;wBACF,eAAe,KAAK,KAAK,CAAC;oBAC5B,EAAE,OAAM;wBACN,QAAQ,IAAI,CACV,CAAC,2CAA2C,EAAE,IAAI,gCAAgC,CAAC;wBAErF,eAAe;wBACf,OAAO,YAAY,CAAC,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;oBAClD;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,CAAC,wCAAwC,EAAE,IAAI,EAAE,CAAC,EAAE;YACpE;QACF;oCAAG;QAAC;QAAK;KAAa;IAEtB,MAAM,WAAW,CAAC;QAChB,IAAI;YACF,eAAe;YACf,wCAAmC;gBACjC,OAAO,YAAY,CAAC,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;YAClD;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,CAAC,wCAAwC,EAAE,IAAI,EAAE,CAAC,EAAE;QACpE;IACF;IAEA,OAAO;QAAC;QAAa;KAAS;AAChC;GArCgB","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file://C%3A/projetos/catalogs/provider/App.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { createContext, useContext, ReactNode } from \"react\";\r\nimport { Product, Sale, DashboardStats } from \"../types/products\";\r\nimport { useLocalStorage } from \"../hooks/useLocalStorage\";\r\n\r\ninterface AppContextType {\r\n  products: Product[];\r\n  sales: Sale[];\r\n  addProduct: (product: Omit<Product, \"id\" | \"createdAt\">) => void;\r\n  updateProduct: (id: string, product: Partial<Product>) => void;\r\n  deleteProduct: (id: string) => void;\r\n  addSale: (sale: Omit<Sale, \"id\" | \"saleDate\">) => void;\r\n  getDashboardStats: () => DashboardStats;\r\n}\r\n\r\nconst AppContext = createContext<AppContextType | undefined>(undefined);\r\n\r\nconst initialProducts: Product[] = [\r\n  {\r\n    id: \"1\",\r\n    name: \"Água Mineral 500ml\",\r\n    brand: \"Crystal\",\r\n    category: \"water\",\r\n    price: 2.5,\r\n    stock: 100,\r\n    description: \"Água mineral natural sem gás\",\r\n    createdAt: new Date(),\r\n  },\r\n  {\r\n    id: \"2\",\r\n    name: \"Coca-Cola 350ml\",\r\n    brand: \"Coca-Cola\",\r\n    category: \"soda\",\r\n    price: 4.5,\r\n    stock: 75,\r\n    description: \"Refrigerante tradicional\",\r\n    createdAt: new Date(),\r\n  },\r\n];\r\n\r\nexport function AppProvider({ children }: { children: ReactNode }) {\r\n  const [products, setProducts] = useLocalStorage<Product[]>(\r\n    \"products\",\r\n    initialProducts\r\n  );\r\n  const [sales, setSales] = useLocalStorage<Sale[]>(\"sales\", []);\r\n\r\n  const addProduct = (productData: Omit<Product, \"id\" | \"createdAt\">) => {\r\n    const newProduct: Product = {\r\n      ...productData,\r\n      id: Date.now().toString(),\r\n      createdAt: new Date(),\r\n    };\r\n    setProducts((prev) => [...prev, newProduct]);\r\n  };\r\n\r\n  const updateProduct = (id: string, productUpdate: Partial<Product>) => {\r\n    setProducts((prev) =>\r\n      prev.map((product) =>\r\n        product.id === id ? { ...product, ...productUpdate } : product\r\n      )\r\n    );\r\n  };\r\n\r\n  const deleteProduct = (id: string) => {\r\n    setProducts((prev) => prev.filter((product) => product.id !== id));\r\n  };\r\n\r\n  const addSale = (saleData: Omit<Sale, \"id\" | \"saleDate\">) => {\r\n    const newSale: Sale = {\r\n      ...saleData,\r\n      id: Date.now().toString(),\r\n      saleDate: new Date(),\r\n    };\r\n    setSales((prev) => [...prev, newSale]);\r\n\r\n    // Update product stock\r\n    updateProduct(saleData.productId, {\r\n      stock:\r\n        products.find((p) => p.id === saleData.productId)!.stock -\r\n        saleData.quantity,\r\n    });\r\n  };\r\n\r\n  const getDashboardStats = (): DashboardStats => {\r\n    const today = new Date();\r\n    const todayStr = today.toDateString();\r\n    const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n\r\n    const todaySales = sales.filter(\r\n      (sale) => new Date(sale.saleDate).toDateString() === todayStr\r\n    ).length;\r\n\r\n    const weeklyRevenue = sales\r\n      .filter((sale) => new Date(sale.saleDate) >= weekAgo)\r\n      .reduce((total, sale) => total + sale.totalAmount, 0);\r\n\r\n    const productSales = sales.reduce(\r\n      (acc, sale) => {\r\n        acc[sale.productName] = (acc[sale.productName] || 0) + sale.quantity;\r\n        return acc;\r\n      },\r\n      {} as Record<string, number>\r\n    );\r\n\r\n    const topSellingProduct =\r\n      Object.entries(productSales).sort(([, a], [, b]) => b - a)[0]?.[0] ||\r\n      \"Nenhum\";\r\n\r\n    return {\r\n      totalSales: sales.length,\r\n      totalRevenue: sales.reduce((total, sale) => total + sale.totalAmount, 0),\r\n      totalProducts: products.length,\r\n      lowStockProducts: products.filter((p) => p.stock < 10).length,\r\n      todaySales,\r\n      weeklyRevenue,\r\n      topSellingProduct,\r\n    };\r\n  };\r\n\r\n  const value = {\r\n    products,\r\n    sales,\r\n    addProduct,\r\n    updateProduct,\r\n    deleteProduct,\r\n    addSale,\r\n    getDashboardStats,\r\n  };\r\n\r\n  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;\r\n}\r\n\r\nexport function useApp() {\r\n  const context = useContext(AppContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useApp must be used within an AppProvider\");\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file://C%3A/projetos/catalogs/utils/fetchData.ts"],"sourcesContent":["// Biblioteca\r\nimport axios from \"axios\";\r\n\r\nexport function setupApiClient(token?: string, email?: string, senha?: string) {\r\n  const api = axios.create({\r\n    baseURL: \"https://catalogsapi.vercel.app/v1\",\r\n  });\r\n\r\n  api.interceptors.request.use(\r\n    (config) => {\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n      return config;\r\n    },\r\n\r\n    (error) => {\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  return api;\r\n}\r\n"],"names":[],"mappings":"AAAA,aAAa;;;;AACb;;AAEO,SAAS,eAAe,KAAc,EAAE,KAAc,EAAE,KAAc;IAC3E,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;QACvB,SAAS;IACX;IAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG;8BAC1B,CAAC;YACC,IAAI,OAAO;gBACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;YAClD;YACA,OAAO;QACT;;8BAEA,CAAC;YACC,OAAO,QAAQ,MAAM,CAAC;QACxB;;IAGF,OAAO;AACT","debugId":null}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file://C%3A/projetos/catalogs/provider/auth.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n// Utils\r\nimport { setupApiClient } from \"@/utils/fetchData\";\r\n\r\n// Context\r\nimport { createContext, ReactNode, useState } from \"react\";\r\n\r\n// Cookie\r\nimport Cookies from \"js-cookie\";\r\n\r\n// Types\r\nimport { itemUsers } from \"../types/users/index\";\r\n\r\n// Tipagens\r\ntype SignInProps = {\r\n  email: string;\r\n  password: string;\r\n};\r\n\r\ntype SignInResponse = {\r\n  user: itemUsers;\r\n  token: string;\r\n};\r\n\r\ntype AuthContextData = {\r\n  user: itemUsers | undefined;\r\n  token: string;\r\n  signIn: (credentials: SignInProps) => Promise<SignInResponse>;\r\n  signOut: () => void;\r\n};\r\n\r\nexport const AuthContext = createContext({} as AuthContextData);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<itemUsers>();\r\n  const [token, setToken] = useState<string>(\"\");\r\n\r\n  const api = setupApiClient();\r\n  const router = useRouter();\r\n\r\n  async function signIn({\r\n    email,\r\n    password,\r\n  }: SignInProps): Promise<SignInResponse> {\r\n    try {\r\n      const resp = await api.post(\"/users/signin\", { email, password });\r\n      if (!resp) throw new Error(\"Credenciais inválidas\");\r\n\r\n      const token = resp.data.token;\r\n      const user = resp.data.user;\r\n      const userRuleName = user.rule.name.toLowerCase();\r\n\r\n      Cookies.set(\"auth_token\", token);\r\n      Cookies.set(\"user_rule\", userRuleName);\r\n\r\n      setUser(user);\r\n      setToken(token);\r\n      api.defaults.headers[\"Authorization\"] = `Bearer ${token}`;\r\n\r\n      // Rule-based redirection\r\n      const routeByRule: Record<string, string> = {\r\n        admin: \"/dashboard\",\r\n        dono: \"/dashboard\",\r\n        suportedosistema: \"/dashboard\",\r\n        cliente: \"/catalogo\",\r\n        estoque: \"/estoque\",\r\n      };\r\n\r\n      router.push(routeByRule[userRuleName] || \"/\");\r\n\r\n      return { user, token };\r\n    } catch (err) {\r\n      console.log(\"error: \", err);\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  async function signOut() {\r\n    Cookies.remove(\"auth_token\");\r\n    Cookies.remove(\"user_rule\");\r\n    setUser(undefined);\r\n    setToken(\"\");\r\n    router.push(\"/signin\");\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, token, signIn, signOut }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA,QAAQ;AACR;AAEA,UAAU;AACV;AAEA,SAAS;AACT;;;AAXA;;;;;AAkCO,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAE,CAAC;AAEnC,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD;IAC/B,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAE3C,MAAM,MAAM,CAAA,GAAA,qHAAA,CAAA,iBAAc,AAAD;IACzB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,eAAe,OAAO,EACpB,KAAK,EACL,QAAQ,EACI;QACZ,IAAI;YACF,MAAM,OAAO,MAAM,IAAI,IAAI,CAAC,iBAAiB;gBAAE;gBAAO;YAAS;YAC/D,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;YAE3B,MAAM,QAAQ,KAAK,IAAI,CAAC,KAAK;YAC7B,MAAM,OAAO,KAAK,IAAI,CAAC,IAAI;YAC3B,MAAM,eAAe,KAAK,IAAI,CAAC,IAAI,CAAC,WAAW;YAE/C,wJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,cAAc;YAC1B,wJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,aAAa;YAEzB,QAAQ;YACR,SAAS;YACT,IAAI,QAAQ,CAAC,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;YAEzD,yBAAyB;YACzB,MAAM,cAAsC;gBAC1C,OAAO;gBACP,MAAM;gBACN,kBAAkB;gBAClB,SAAS;gBACT,SAAS;YACX;YAEA,OAAO,IAAI,CAAC,WAAW,CAAC,aAAa,IAAI;YAEzC,OAAO;gBAAE;gBAAM;YAAM;QACvB,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC,WAAW;YACvB,MAAM;QACR;IACF;IAEA,eAAe;QACb,wJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;QACf,wJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;QACf,QAAQ;QACR,SAAS;QACT,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAQ;QAAQ;kBACzD;;;;;;AAGP;GAzDgB;;QAKC,qIAAA,CAAA,YAAS;;;KALV","debugId":null}}]
}