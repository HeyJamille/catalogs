{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/jamille/Documentos/catalogs/app/signin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useContext, useState } from \"react\";\n\n// Route\nimport { useRouter } from \"next/navigation\";\n\n// Icon\nimport { Button } from \"@heroui/button\";\nimport { AiOutlineEye, AiOutlineEyeInvisible } from \"react-icons/ai\";\n\n// Provider\nimport { AuthContext } from \"../../provider/auth\";\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [erro, setErro] = useState(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const router = useRouter();\n\n  const { signIn } = useContext(AuthContext);\n\n  // states for \"invalid field\" control\n  const [touched, setTouched] = useState({\n    email: false,\n    password: false,\n  });\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    setTouched({\n      email: true,\n      password: true,\n    });\n\n    // Checking whether the fields have been filled in\n    if (!email || !password) {\n      setErro(\"Preencha todos os campos.\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const res = await signIn({ email, password });\n\n      if (!res || !res.token) {\n        throw new Error(\"Token não retornado.\");\n      }\n\n      const regra = res.user?.rule?.name;\n\n      if (!regra || !regra) {\n        throw new Error(\"Regra do usuário não encontrada.\");\n      }\n\n      // Redirection according to rule\n      if (regra === \"Cliente\") {\n        router.push(\"/catalogo\");\n      } else {\n        router.push(\"/dashboard\");\n      }\n    } catch (err: any) {\n      setErro(\"E-mail ou senha inválidos\");\n    }\n  };\n\n  const values = { email, password };\n\n  // red border\n  const inputClass = (field: keyof typeof touched) =>\n    touched[field] && !values[field]\n      ? \"w-full px-5 py-3 border border-red-400 rounded-xl shadow-sm focus:outline-none focus:ring-3 focus:ring-red-400 transition\"\n      : \"w-full px-5 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-3 focus:ring-blue-400 transition\";\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-tr from-blue-50 via-white to-blue-50 flex items-center justify-center px-4 py-12\">\n      {/* Loading bar at the top */}\n      {loading && (\n        <div className=\"fixed top-0 left-0 w-full h-1 bg-blue-600 animate-[loadingBar_2s_linear_infinite]\"></div>\n      )}\n\n      <style>\n        {`\n          @keyframes loadingBar {\n            0% { transform: translateX(-100%); }\n            100% { transform: translateX(100%); }\n          }\n        `}\n      </style>\n\n      <div className=\"max-w-md w-full bg-white rounded-3xl shadow-lg p-10\">\n        <h2 className=\"text-4xl font-extrabold text-center text-blue-700 mb-6\">\n          Bem-vindo!\n        </h2>\n        <p className=\"text-center text-gray-600 mb-8 text-lg\">\n          Faça login para acessar sua conta\n        </p>\n\n        <form onSubmit={handleLogin} className=\"space-y-6\" noValidate>\n          <div>\n            <label\n              htmlFor=\"email\"\n              className=\"block text-sm font-semibold text-gray-700 mb-1\"\n            >\n              E-mail\n            </label>\n            <input\n              id=\"email\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              onBlur={() => setTouched({ ...touched, email: true })}\n              required\n              placeholder=\"exemplo@dominio.com\"\n              className={`w-full px-5 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-3 focus:ring-blue-400 transition ${inputClass(\"email\")}`}\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor=\"password\"\n              className=\"block text-sm font-semibold text-gray-700 mb-1\"\n            >\n              Senha\n            </label>\n            <div className=\"relative\">\n              <input\n                id=\"password\"\n                type={showPassword ? \"text\" : \"password\"}\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                onBlur={() => setTouched({ ...touched, password: true })}\n                required\n                placeholder=\"••••••••\"\n                className={`w-full px-5 py-3 border rounded-xl shadow-sm focus:outline-none focus:ring-3 transition ${inputClass(\"password\")}`}\n              />\n              <button\n                type=\"button\"\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-blue-600 focus:outline-none\"\n                onClick={() => setShowPassword(!showPassword)}\n                tabIndex={-1}\n                aria-label={showPassword ? \"Esconder senha\" : \"Mostrar senha\"}\n              >\n                {showPassword ? (\n                  <AiOutlineEyeInvisible size={24} />\n                ) : (\n                  <AiOutlineEye size={24} />\n                )}\n              </button>\n            </div>\n          </div>\n\n          <p className=\"text-end text-sm text-gray-500\">\n            Esqueceu sua senha?{\" \"}\n            <a href=\"#\" className=\"text-blue-600 hover:underline font-medium\">\n              Recuperar\n            </a>\n          </p>\n\n          {erro && (\n            <p className=\"text-center text-red-600 font-semibold text-sm\">\n              {erro}\n            </p>\n          )}\n\n          <Button\n            type=\"submit\"\n            isLoading={loading}\n            color=\"primary\"\n            className=\"w-full\"\n          >\n            {loading ? \"Carregando\" : \"Entrar\"}\n          </Button>\n        </form>\n        {/* Barra de carregamento no topo \n        <p className=\"mt-6 text-center text-gray-600 text-sm\">\n          Não tem uma conta?{\" \"}\n          <a href=\"/signout\" className=\"text-blue-600 font-semibold hover:underline\">\n            Cadastre-se\n          </a>\n        </p>\n        */}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}