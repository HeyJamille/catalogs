{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///home/jamille/Documentos/catalogs/utils/fetchData/index.ts"],"sourcesContent":["// Biblioteca\nimport axios from \"axios\";\n\nexport function setupApiClient(token?: string, email?: string, senha?: string) {\n  const api = axios.create({\n    baseURL: \"https://catalogsapi.vercel.app/v1\",\n  });\n\n  api.interceptors.request.use(\n    (config) => {\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    },\n\n    (error) => {\n      return Promise.reject(error);\n    }\n  );\n\n  return api;\n}\n"],"names":[],"mappings":"AAAA,aAAa;;;;AACb;;AAEO,SAAS,eAAe,KAAc,EAAE,KAAc,EAAE,KAAc;IAC3E,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;QACvB,SAAS;IACX;IAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;QACC,IAAI,OAAO;YACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;QACA,OAAO;IACT,GAEA,CAAC;QACC,OAAO,QAAQ,MAAM,CAAC;IACxB;IAGF,OAAO;AACT","debugId":null}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///home/jamille/Documentos/catalogs/provider/auth.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { setupApiClient } from \"@/utils/fetchData\";\nimport { createContext, ReactNode, useState } from \"react\";\nimport Cookies from \"js-cookie\";\nimport { itemUsers } from \"../types/users/index\";\n\ntype SignInProps = {\n  email: string;\n  password: string;\n};\n\ntype SignInResponse = {\n  user: itemUsers;\n  token: string;\n};\n\ntype AuthContextData = {\n  user: itemUsers | undefined;\n  token: string;\n  signIn: (credentials: SignInProps) => Promise<SignInResponse>;\n  signOut: () => void;\n};\n\nexport const AuthContext = createContext({} as AuthContextData);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<itemUsers>();\n  const [token, setToken] = useState<string>(\"\");\n\n  const api = setupApiClient();\n  const router = useRouter();\n\n  async function signIn({\n    email,\n    password,\n  }: SignInProps): Promise<SignInResponse> {\n    try {\n      const resp = await api.post(\"/users/signin\", {\n        email,\n        password,\n      });\n\n      if (!resp) {\n        throw new Error(\"Credenciais inv√°lidas\");\n      }\n\n      const token = resp.data.token;\n      const user = resp.data.user;\n\n      Cookies.set(\"auth_token\", token);\n\n      setUser(user);\n      setToken(token);\n\n      api.defaults.headers[\"Authorization\"] = `Bearer ${token}`;\n\n      return { user, token };\n    } catch (err) {\n      console.log(\"error: \", err);\n      throw err;\n    }\n  }\n\n  function signOut() {\n    Cookies.remove(\"auth_token\");\n    setUser(undefined);\n    setToken(\"\");\n    router.push(\"/login\");\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, token, signIn, signOut }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAyBO,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAE,CAAC;AAEnC,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD;IAC/B,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAE3C,MAAM,MAAM,CAAA,GAAA,2HAAA,CAAA,iBAAc,AAAD;IACzB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,eAAe,OAAO,EACpB,KAAK,EACL,QAAQ,EACI;QACZ,IAAI;YACF,MAAM,OAAO,MAAM,IAAI,IAAI,CAAC,iBAAiB;gBAC3C;gBACA;YACF;YAEA,IAAI,CAAC,MAAM;gBACT,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,QAAQ,KAAK,IAAI,CAAC,KAAK;YAC7B,MAAM,OAAO,KAAK,IAAI,CAAC,IAAI;YAE3B,qJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,cAAc;YAE1B,QAAQ;YACR,SAAS;YAET,IAAI,QAAQ,CAAC,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;YAEzD,OAAO;gBAAE;gBAAM;YAAM;QACvB,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC,WAAW;YACvB,MAAM;QACR;IACF;IAEA,SAAS;QACP,qJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;QACf,QAAQ;QACR,SAAS;QACT,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAQ;QAAQ;kBACzD;;;;;;AAGP","debugId":null}}]
}